<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>ClubDelCódigo - Tercera Reunion</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link rel="stylesheet" href="styles.css">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Club<sub>Del</sub>Código</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="./about.html">Sobre el club</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./recursos.html">Recursos</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-reuniones" role="button" data-bs-toggle="dropdown" aria-expanded="false">Reuniones</a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-reuniones">
<li>
    <a class="dropdown-item" href="./reunion1.html">
 <span class="dropdown-text">Primera reunión</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./reunion2.html">
 <span class="dropdown-text">Segunda reunión</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./reunion3.html">
 <span class="dropdown-text">Tercera Reunion</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./reunion4.html">
 <span class="dropdown-text">Cuarta Reunión</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./reunion5.html">
 <span class="dropdown-text">Quinta Reunión</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/toninif/clubdelcodigo/blob/main/README.md"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
</ul>
<div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li>
<a href="#manejo-de-datos-intro" id="toc-manejo-de-datos-intro" class="nav-link active" data-scroll-target="#manejo-de-datos-intro">Manejo de datos: Intro</a>
  <ul class="collapse">
<li><a href="#datos-utilizaremos" id="toc-datos-utilizaremos" class="nav-link" data-scroll-target="#datos-utilizaremos">Datos utilizaremos</a></li>
  <li>
<a href="#pero-c%C3%B3mo" id="toc-pero-cómo" class="nav-link" data-scroll-target="#pero-c%C3%B3mo">Pero… ¿Cómo?</a>
  <ul class="collapse">
<li><a href="#filtrar" id="toc-filtrar" class="nav-link" data-scroll-target="#filtrar">Filtrar</a></li>
  <li><a href="#seleccionar" id="toc-seleccionar" class="nav-link" data-scroll-target="#seleccionar">Seleccionar</a></li>
  <li><a href="#crear" id="toc-crear" class="nav-link" data-scroll-target="#crear">Crear</a></li>
  <li><a href="#ordenar" id="toc-ordenar" class="nav-link" data-scroll-target="#ordenar">Ordenar</a></li>
  <li><a href="#acomodar" id="toc-acomodar" class="nav-link" data-scroll-target="#acomodar">Acomodar</a></li>
  <li><a href="#renombrar" id="toc-renombrar" class="nav-link" data-scroll-target="#renombrar">Renombrar</a></li>
  </ul>
</li>
  <li><a href="#pipe-pipa-encadenamiento-tuberias" id="toc-pipe-pipa-encadenamiento-tuberias" class="nav-link" data-scroll-target="#pipe-pipa-encadenamiento-tuberias">Pipe, Pipa, Encadenamiento, Tuberias…</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Tercera Reunion</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header><section id="manejo-de-datos-intro" class="level1"><h1>Manejo de datos: Intro</h1>
<p>El manejo de datos (carga, limpieza, orden, visualización, modelado, <em>ver imagen de abajo</em>) es una de las tareas a las que mayor tiempo le dedicaremos cuando estemos trabajando con R. Uno de los paquetes más utilizados para llevar adelante esta tarea es <code>dplyr</code>. Este paquete forma parte del <code>tidyverse</code> y contiene una serie de funciones que nos dejaran <code>seleccionar</code>, <code>renombrar</code>, <code>filtrar</code>, <code>re-acomodar</code> y <code>resumir</code> las variables de nuestra base de datos. Conviene pensar en <code>dplyr</code> como una gramática para el manejo de datos.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="./imgagenes/flowDatos.png" class="img-fluid figure-img"></p>
</figure>
</div>
<section id="datos-utilizaremos" class="level2"><h2 class="anchored" data-anchor-id="datos-utilizaremos">Datos utilizaremos</h2>
<p>Aca la realidad es que se pueden utilizar todo tipo de bases de datos. Se podrían usar las bases que vienen en el mismo R como por ejemplo <code>iris</code> o también la base de pinguinos del paquete <code>palmerpenguins</code>. Esas bases siempre las tendremos a disposición. Sin embargo hoy vamos a trabajar con algunas funciona de dplyr utilizando una base con datos bibliométricos que fue generada utilizando la herramienta Constellate de jstor. Esta base es bastante cercana a lo que podriamos conseguir en “el mundo real” porque tiene datos faltantes, esta re desordanada, tiene malos nombres de variables etc…</p>
<p>Para acceder a los datos podemos hacer <a href="https://osf.io/download/cp2kz">click aca</a> o directamente entrar al repositorio y descargarlos manualmente: https://osf.io/bwdvy/?view_only=</p>
<p>Una vez descargados los datos es conveniente guardarlos en la carpeta datos de nuestro proyecto.</p>
<p>Otra opción es ejecurtar este codigo. De esta manera la funcion dowload.file tomara la url que ingresemos, desgarcará el archivo y lo guardará donde le indiquemos. En este caso en la carpeta datos de nuestro proyecto</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
ATENCIÓN!!
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Para que esto funcione ya debemos tener creada la carpeta datos en nuestro proyecto</p>
</div>
</div>
</div>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">download.file</span>(<span class="at">url =</span> <span class="st">"https://osf.io/download/cp2kz"</span>, <span class="co"># URL donde esta el archivo a descargar</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>              <span class="at">destfile =</span> <span class="st">"datos/datos_cdc.csv"</span>) <span class="co"># carpeta donde se guardara el archivo</span></span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(readr) <span class="co"># Para leer datos</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>datos_cdc <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"datos/datos_cdc.csv"</span>) <span class="co"># Funcion para leer datos csv (separados por coma)</span></span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">glimpse</span>() <span class="co"># Esto es para darle un vistazo a la base</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="pero-cómo" class="level2"><h2 class="anchored" data-anchor-id="pero-cómo">Pero… ¿Cómo?</h2>
<p>Podemos pensar el manejo de datos con dplyr como si las funciones del paquete fueran verbos. Cuales son esos verbos?</p>
<table class="table">
<colgroup>
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 89%">
</colgroup>
<thead><tr class="header">
<th>Verbo</th>
<th>Función</th>
<th>Descripción</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Filtrar</td>
<td><code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code></td>
<td>Esta función maneja los datos según sus filas. Lo que hace es filtrar datos según la lógica que le indiquemos.</td>
</tr>
<tr class="even">
<td>Seleccionar</td>
<td><code>select()</code></td>
<td>Esta funciona maneja los datos según las columnas. Lo que hace es seleccionar (<em>o también quitar</em>) variables (columnas de nuestra base de datos)</td>
</tr>
<tr class="odd">
<td>Crear</td>
<td><code>mutate()</code></td>
<td>Esta función también modifica columnas y lo que hace es crear variables nuevas.</td>
</tr>
<tr class="even">
<td>Ordenar</td>
<td><code>arrange()</code></td>
<td>Esta función maneja según las filas de alguna columna seleccionada. Lo que hace es ordenar la base de datos de menor a mayor (<em>o viceversa</em>) segun los datos de una variable. <strong>Básicamente es como el botón de Ordenar y Filtrar de excel</strong>.</td>
</tr>
<tr class="odd">
<td>Acomodar</td>
<td><code>relocate()</code></td>
<td>Esta función también trabaja con columnas y lo que hace es re-ordenarlas. Emula lo que comúnmente se hace con el mouse. Indicamos que variables queremos mover y hacia donde.</td>
</tr>
<tr class="even">
<td>Renombrar</td>
<td><code>rename()</code></td>
<td>Esta función trabaja con columnas y lo que hace es renombrarlas. El orden es: nombre nuevo = nombre viejo</td>
</tr>
<tr class="odd">
<td>Resumir</td>
<td><code>summarise()</code></td>
<td>Esta función genera un resumen de nuestros datos ya sean generales o agrupados utilizando la función de abajo <code>group_by()</code>
</td>
</tr>
<tr class="even">
<td>Agrupar</td>
<td><code>group_by()</code></td>
<td>Esta función agrupa los datos según una variable categórica en particular.</td>
</tr>
</tbody>
</table>
<p>La manera de utilizar estas herramientas es bastante simple. Se escribe la función que necesitemos, se indican los datos en los que vamos a trabajar y luego se indica aquello que necesitemos hacer.</p>
<section id="filtrar" class="level3"><h3 class="anchored" data-anchor-id="filtrar">Filtrar</h3>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Pseudocodigo</p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">funcion</span>(datos, lo que necesitamos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Pseudocodigo con un objetivo más claro</p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">filtrar</span>(datos, variable mayor que <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Codigo para alcanzar el objetivo</p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">filter</span>(<span class="at">.data =</span> starwars, height <span class="sc">&gt;</span> <span class="dv">175</span>) <span class="co"># En este caso solo necesito aquellos datos de quienes tengan una altura mayor a 175 cm</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Darth V…    202 136   none       white      yellow          41.9 male  mascu…
 2 Owen La…    178 120   brown, gr… light      blue            52   male  mascu…
 3 Biggs D…    183  84   black      light      brown           24   male  mascu…
 4 Obi-Wan…    182  77   auburn, w… fair       blue-gray       57   male  mascu…
 5 Anakin …    188  84   blond      fair       blue            41.9 male  mascu…
 6 Wilhuff…    180  NA   auburn, g… fair       blue            64   male  mascu…
 7 Chewbac…    228 112   brown      unknown    blue           200   male  mascu…
 8 Han Solo    180  80   brown      fair       brown           29   male  mascu…
 9 Jek Ton…    180 110   brown      fair       blue            NA   male  mascu…
10 Boba Fe…    183  78.2 black      fair       brown           31.5 male  mascu…
# … with 38 more rows, and 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">filter</span>(<span class="at">.data =</span> starwars, species <span class="sc">==</span> <span class="st">"Wookiee"</span>) <span class="co"># En este caso solo necesito los datos de quienes sean de la especie Wookiee</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Chewbacca    228   112 brown      unknown    blue             200 male  mascu…
2 Tarfful      234   136 brown      brown      blue              NA male  mascu…
# … with 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section><section id="seleccionar" class="level3"><h3 class="anchored" data-anchor-id="seleccionar">Seleccionar</h3>
<p>Pseudocodigo</p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">seleccionar</span>(datos, <span class="fu">variable</span>(s) de interes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Código</p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">select</span>(<span class="at">.data =</span> starwars, <span class="fu">c</span>(name, height, mass, gender)) <span class="co"># En este caso solo me interesaban las variables nombre, altura, masa y genero</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 4
   name               height  mass gender   
   &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;    
 1 Luke Skywalker        172    77 masculine
 2 C-3PO                 167    75 masculine
 3 R2-D2                  96    32 masculine
 4 Darth Vader           202   136 masculine
 5 Leia Organa           150    49 feminine 
 6 Owen Lars             178   120 masculine
 7 Beru Whitesun lars    165    75 feminine 
 8 R5-D4                  97    32 masculine
 9 Biggs Darklighter     183    84 masculine
10 Obi-Wan Kenobi        182    77 masculine
# … with 77 more rows</code></pre>
</div>
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>seleccion1 <span class="ot">&lt;-</span> <span class="fu">select</span>(<span class="at">.data =</span> starwars, <span class="fu">c</span>(name, height, mass, gender))</span>
<span id="cb12-2"><a href="#cb12-2"></a></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="fu">select</span>(<span class="at">.data =</span> seleccion1, <span class="sc">-</span>height) <span class="co"># En este caso se puede usar el select para quitar una variable. Eso se hace usando un - antes de la variable que queremos quitar.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 3
   name                mass gender   
   &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;    
 1 Luke Skywalker        77 masculine
 2 C-3PO                 75 masculine
 3 R2-D2                 32 masculine
 4 Darth Vader          136 masculine
 5 Leia Organa           49 feminine 
 6 Owen Lars            120 masculine
 7 Beru Whitesun lars    75 feminine 
 8 R5-D4                 32 masculine
 9 Biggs Darklighter     84 masculine
10 Obi-Wan Kenobi        77 masculine
# … with 77 more rows</code></pre>
</div>
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">select</span>(<span class="at">.data =</span> starwars, <span class="fu">starts_with</span>(<span class="st">"h"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 3
   height hair_color    homeworld
    &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;    
 1    172 blond         Tatooine 
 2    167 &lt;NA&gt;          Tatooine 
 3     96 &lt;NA&gt;          Naboo    
 4    202 none          Tatooine 
 5    150 brown         Alderaan 
 6    178 brown, grey   Tatooine 
 7    165 brown         Tatooine 
 8     97 &lt;NA&gt;          Tatooine 
 9    183 black         Tatooine 
10    182 auburn, white Stewjon  
# … with 77 more rows</code></pre>
</div>
</div>
</section><section id="crear" class="level3"><h3 class="anchored" data-anchor-id="crear">Crear</h3>
<p>Pseudocodigo</p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">crear</span>(datos, <span class="fu">variable</span>(s) que necesito <span class="at">crear =</span> contenido)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Código</p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">mutate</span>(<span class="at">.data =</span> seleccion1, <span class="at">altura =</span> height<span class="sc">/</span><span class="dv">100</span>) <span class="co"># En este caso vamos a crear una nueva variable que contenta la transformacion de height de centimetros a metros</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 5
   name               height  mass gender    altura
   &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;
 1 Luke Skywalker        172    77 masculine   1.72
 2 C-3PO                 167    75 masculine   1.67
 3 R2-D2                  96    32 masculine   0.96
 4 Darth Vader           202   136 masculine   2.02
 5 Leia Organa           150    49 feminine    1.5 
 6 Owen Lars             178   120 masculine   1.78
 7 Beru Whitesun lars    165    75 feminine    1.65
 8 R5-D4                  97    32 masculine   0.97
 9 Biggs Darklighter     183    84 masculine   1.83
10 Obi-Wan Kenobi        182    77 masculine   1.82
# … with 77 more rows</code></pre>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
A tener en cuenta!
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Cuando usemos mutate() con una variable que ya existe en el dataset conviene no sobreescribirla. Esto afectaría la reproducibilidad del código. Lo mejor es generar una nueva variable con algún identificador.</p>
<p>Por ejemplo: Cuando cargamos el dataset vemos que la variable de agrupación gender es de tipo chr y lo que necesitamos es que sea un factor. En ese caso se haría lo siguiente:</p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">mutate</span>(<span class="at">.data =</span> seleccion1, <span class="at">gender_fct =</span> <span class="fu">as_factor</span>(gender)) <span class="co"># Nos quedan ambas variables y solo utilizamos la que necesitemos</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 5
   name               height  mass gender    gender_fct
   &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;fct&gt;     
 1 Luke Skywalker        172    77 masculine masculine 
 2 C-3PO                 167    75 masculine masculine 
 3 R2-D2                  96    32 masculine masculine 
 4 Darth Vader           202   136 masculine masculine 
 5 Leia Organa           150    49 feminine  feminine  
 6 Owen Lars             178   120 masculine masculine 
 7 Beru Whitesun lars    165    75 feminine  feminine  
 8 R5-D4                  97    32 masculine masculine 
 9 Biggs Darklighter     183    84 masculine masculine 
10 Obi-Wan Kenobi        182    77 masculine masculine 
# … with 77 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="ordenar" class="level3"><h3 class="anchored" data-anchor-id="ordenar">Ordenar</h3>
<p>Pseudocodigo</p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">ordenar</span>(datos, variable seleccionada)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Código</p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">arrange</span>(<span class="at">.data =</span> starwars, height) <span class="co"># Orden de menor a mayor</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Yoda         66    17 white      green      brown            896 male  mascu…
 2 Ratts T…     79    15 none       grey, blue unknown           NA male  mascu…
 3 Wicket …     88    20 brown      brown      brown              8 male  mascu…
 4 Dud Bolt     94    45 none       blue, grey yellow            NA male  mascu…
 5 R2-D2        96    32 &lt;NA&gt;       white, bl… red               33 none  mascu…
 6 R4-P17       96    NA none       silver, r… red, blue         NA none  femin…
 7 R5-D4        97    32 &lt;NA&gt;       white, red red               NA none  mascu…
 8 Sebulba     112    40 none       grey, red  orange            NA male  mascu…
 9 Gasgano     122    NA none       white, bl… black             NA male  mascu…
10 Watto       137    NA black      blue, grey yellow            NA male  mascu…
# … with 77 more rows, and 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">arrange</span>(<span class="at">.data =</span> starwars, <span class="fu">desc</span>(height)) <span class="co"># Orden de mayor a menor</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Yarael …    264    NA none       white      yellow          NA   male  mascu…
 2 Tarfful     234   136 brown      brown      blue            NA   male  mascu…
 3 Lama Su     229    88 none       grey       black           NA   male  mascu…
 4 Chewbac…    228   112 brown      unknown    blue           200   male  mascu…
 5 Roos Ta…    224    82 none       grey       orange          NA   male  mascu…
 6 Grievous    216   159 none       brown, wh… green, y…       NA   male  mascu…
 7 Taun We     213    NA none       grey       black           NA   fema… femin…
 8 Rugor N…    206    NA none       green      orange          NA   male  mascu…
 9 Tion Me…    206    80 none       grey       black           NA   male  mascu…
10 Darth V…    202   136 none       white      yellow          41.9 male  mascu…
# … with 77 more rows, and 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section><section id="acomodar" class="level3"><h3 class="anchored" data-anchor-id="acomodar">Acomodar</h3>
<p>Pseudocodigo</p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="fu">acomodar</span>(datos, variable, antes<span class="sc">/</span>despues de)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Código</p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="fu">relocate</span>(<span class="at">.data =</span> seleccion1, gender, <span class="at">.after =</span> name) <span class="co"># En este caso acomodamos gender despues de name</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 4
   name               gender    height  mass
   &lt;chr&gt;              &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt;
 1 Luke Skywalker     masculine    172    77
 2 C-3PO              masculine    167    75
 3 R2-D2              masculine     96    32
 4 Darth Vader        masculine    202   136
 5 Leia Organa        feminine     150    49
 6 Owen Lars          masculine    178   120
 7 Beru Whitesun lars feminine     165    75
 8 R5-D4              masculine     97    32
 9 Biggs Darklighter  masculine    183    84
10 Obi-Wan Kenobi     masculine    182    77
# … with 77 more rows</code></pre>
</div>
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="fu">relocate</span>(<span class="at">.data =</span> seleccion1, name, <span class="at">.before =</span> mass) <span class="co"># En este caso acomodamos name despues de mass</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 4
   height name                mass gender   
    &lt;int&gt; &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;    
 1    172 Luke Skywalker        77 masculine
 2    167 C-3PO                 75 masculine
 3     96 R2-D2                 32 masculine
 4    202 Darth Vader          136 masculine
 5    150 Leia Organa           49 feminine 
 6    178 Owen Lars            120 masculine
 7    165 Beru Whitesun lars    75 feminine 
 8     97 R5-D4                 32 masculine
 9    183 Biggs Darklighter     84 masculine
10    182 Obi-Wan Kenobi        77 masculine
# … with 77 more rows</code></pre>
</div>
</div>
</section><section id="renombrar" class="level3"><h3 class="anchored" data-anchor-id="renombrar">Renombrar</h3>
<p>Pseudocodigo</p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">renombrar</span>(datos, nombre <span class="at">nuevo =</span> nombre viejo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Código</p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>seleccion1_traducida <span class="ot">&lt;-</span> <span class="fu">rename</span>(seleccion1,</span>
<span id="cb32-2"><a href="#cb32-2"></a>                               <span class="at">nombre =</span> name,</span>
<span id="cb32-3"><a href="#cb32-3"></a>                               <span class="at">altura =</span> height,</span>
<span id="cb32-4"><a href="#cb32-4"></a>                               <span class="at">masa_kg =</span> mass,</span>
<span id="cb32-5"><a href="#cb32-5"></a>                               <span class="at">genero =</span> gender)</span>
<span id="cb32-6"><a href="#cb32-6"></a></span>
<span id="cb32-7"><a href="#cb32-7"></a><span class="fu">names</span>(seleccion1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "name"   "height" "mass"   "gender"</code></pre>
</div>
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="fu">names</span>(seleccion1_traducida)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "nombre"  "altura"  "masa_kg" "genero" </code></pre>
</div>
</div>
</section></section><section id="pipe-pipa-encadenamiento-tuberias" class="level2"><h2 class="anchored" data-anchor-id="pipe-pipa-encadenamiento-tuberias">Pipe, Pipa, Encadenamiento, Tuberias…</h2>
<p>Los verbos que proporciona dplyr son geniales y muy faciles de utilizar, pero para todo lo que hicimos más arriba se necesito una linea de codigo para cada verbo. Es decir, cada codigo era independiente del otro. Una gran funcion que permite unificar todos los verbos en un solo programa es la pipa, tuberia o lo que se dice piping.</p>
<p>Les presento a ella <code>%&gt;%</code> el operador del paquete <code>magrittr</code>. Lo que hace es <strong>tomar el resultado de una función y pasarla a otra función como argumento. Esto nos permite vincular una secuencia de pasos de análisis. O en otras palabras, utilizar varios verbos de dplyr en un mismo programa.</strong></p>
<p>Por ejemplo: Se necesita seleccionar algunas variables, renombrarlas y crear variables que sean del tipo correcto. Por ultimo, graficar la altura según el sexo del personaje</p>
<p><em>Sin %&gt;%</em></p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>paso_1 <span class="ot">&lt;-</span> <span class="fu">select</span>(<span class="at">.data =</span> starwars, <span class="fu">c</span>(name, sex, gender, species, mass, height))</span>
<span id="cb36-2"><a href="#cb36-2"></a></span>
<span id="cb36-3"><a href="#cb36-3"></a>paso_2 <span class="ot">&lt;-</span> <span class="fu">rename</span>(<span class="at">.data =</span> paso_1, <span class="at">nombre =</span> name,</span>
<span id="cb36-4"><a href="#cb36-4"></a>                                 <span class="at">sexo =</span> sex,</span>
<span id="cb36-5"><a href="#cb36-5"></a>                                 <span class="at">genero =</span> gender,</span>
<span id="cb36-6"><a href="#cb36-6"></a>                                 <span class="at">especie =</span> species,</span>
<span id="cb36-7"><a href="#cb36-7"></a>                                 <span class="at">masa_kg =</span> mass,</span>
<span id="cb36-8"><a href="#cb36-8"></a>                                 <span class="at">altura =</span> height)</span>
<span id="cb36-9"><a href="#cb36-9"></a></span>
<span id="cb36-10"><a href="#cb36-10"></a>paso_3 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(<span class="at">.data =</span> paso_2, <span class="at">sexo_fct =</span> <span class="fu">as_factor</span>(sexo),</span>
<span id="cb36-11"><a href="#cb36-11"></a>                                 <span class="at">genero_fct =</span> <span class="fu">as_factor</span>(genero),</span>
<span id="cb36-12"><a href="#cb36-12"></a>                                 <span class="at">especie_fct =</span> <span class="fu">as_factor</span>(especie))</span>
<span id="cb36-13"><a href="#cb36-13"></a></span>
<span id="cb36-14"><a href="#cb36-14"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="fu">select</span>(paso_3, <span class="fu">c</span>(sexo_fct, altura, genero_fct)), <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> sexo_fct, <span class="at">y =</span> altura)) <span class="sc">+</span></span>
<span id="cb36-15"><a href="#cb36-15"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb36-16"><a href="#cb36-16"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb36-17"><a href="#cb36-17"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 6 rows containing non-finite values (stat_boxplot).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="reunion3_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><em>Con %&gt;%</em></p>
<div class="cell">
<details open=""><summary>Ver/Ocultar código</summary><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a>starwars <span class="sc">%&gt;%</span> <span class="co"># Selecciono los datos Y DESPUES</span></span>
<span id="cb38-2"><a href="#cb38-2"></a>  <span class="fu">select</span>(name, sex, gender, species, mass, height) <span class="sc">%&gt;%</span> <span class="co">#Selecciono las variables Y DESPUES</span></span>
<span id="cb38-3"><a href="#cb38-3"></a>  <span class="fu">rename</span>(<span class="at">nombre =</span> name, </span>
<span id="cb38-4"><a href="#cb38-4"></a>         <span class="at">sexo =</span> sex,</span>
<span id="cb38-5"><a href="#cb38-5"></a>         <span class="at">genero =</span> gender,</span>
<span id="cb38-6"><a href="#cb38-6"></a>         <span class="at">especie =</span> species,</span>
<span id="cb38-7"><a href="#cb38-7"></a>         <span class="at">masa_kg =</span> mass,</span>
<span id="cb38-8"><a href="#cb38-8"></a>         <span class="at">altura =</span> height) <span class="sc">%&gt;%</span> <span class="co"># Renombro las variables Y DESPUES</span></span>
<span id="cb38-9"><a href="#cb38-9"></a>  <span class="fu">mutate</span>(<span class="at">sexo_fct =</span> <span class="fu">as_factor</span>(sexo),</span>
<span id="cb38-10"><a href="#cb38-10"></a>         <span class="at">genero_fct =</span> <span class="fu">as_factor</span>(genero),</span>
<span id="cb38-11"><a href="#cb38-11"></a>         <span class="at">especie_fct =</span> <span class="fu">as_factor</span>(especie)) <span class="sc">%&gt;%</span> <span class="co"># Creo nuevas variables Y DESPUES</span></span>
<span id="cb38-12"><a href="#cb38-12"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span> <span class="co"># Grafico</span></span>
<span id="cb38-13"><a href="#cb38-13"></a>  <span class="fu">geom_boxplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> sexo_fct, <span class="at">y =</span> altura)) <span class="sc">+</span></span>
<span id="cb38-14"><a href="#cb38-14"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb38-15"><a href="#cb38-15"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 6 rows containing non-finite values (stat_boxplot).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="reunion3_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Aspectos a tener en cuenta!!
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><p>Me encanto la pipa, pero es medio complicada de escribir. Si, es verdad. Para eso usamos el siguiente atajo del teclado <code>CTRL + SHIFT + M</code> y ya tenemos la pipa. Con un poco de practica ya sale sola.</p></li>
<li><p>Existe otra pipa que fue introducida recientemente. Yo le digo el pinguinito. Es la pipa nativa de R y es así |&gt;. En general cumple la misma función. Yo como soy viejo y me acostumbre a usar %&gt;% entonces sigo con esa. Ustedes usen la que mas les guste y cumpla mejor con sus objetivos. Hay debate sobre que pipa usar. Quedara para otro momento.</p></li>
</ul>
</div>
</div>
</div>


<!-- -->

</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb40" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb40-1"><a href="#cb40-1"></a><span class="co">---</span></span>
<span id="cb40-2"><a href="#cb40-2"></a><span class="an">title:</span><span class="co"> "Tercera Reunion"</span></span>
<span id="cb40-3"><a href="#cb40-3"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb40-4"><a href="#cb40-4"></a><span class="co">---</span></span>
<span id="cb40-5"><a href="#cb40-5"></a></span>
<span id="cb40-6"><a href="#cb40-6"></a><span class="fu"># Manejo de datos: Intro</span></span>
<span id="cb40-7"><a href="#cb40-7"></a></span>
<span id="cb40-8"><a href="#cb40-8"></a>El manejo de datos (carga, limpieza, orden, visualización, modelado, *ver imagen de abajo*) es una de las tareas a las que mayor tiempo le dedicaremos cuando estemos trabajando con R. Uno de los paquetes más utilizados para llevar adelante esta tarea es <span class="in">`dplyr`</span>. Este paquete forma parte del <span class="in">`tidyverse`</span> y contiene una serie de funciones que nos dejaran <span class="in">`seleccionar`</span>, <span class="in">`renombrar`</span>, <span class="in">`filtrar`</span>, <span class="in">`re-acomodar`</span> y <span class="in">`resumir`</span> las variables de nuestra base de datos. Conviene pensar en <span class="in">`dplyr`</span> como una gramática para el manejo de datos.</span>
<span id="cb40-9"><a href="#cb40-9"></a></span>
<span id="cb40-10"><a href="#cb40-10"></a><span class="al">![](/imgagenes/flowDatos.png)</span>{fig-align="center"}</span>
<span id="cb40-11"><a href="#cb40-11"></a></span>
<span id="cb40-12"><a href="#cb40-12"></a><span class="fu">## Datos utilizaremos</span></span>
<span id="cb40-13"><a href="#cb40-13"></a></span>
<span id="cb40-14"><a href="#cb40-14"></a>Aca la realidad es que se pueden utilizar todo tipo de bases de datos. Se podrían usar las bases que vienen en el mismo R como por ejemplo <span class="in">`iris`</span> o también la base de pinguinos del paquete <span class="in">`palmerpenguins`</span>. Esas bases siempre las tendremos a disposición. Sin embargo hoy vamos a trabajar con algunas funciona de dplyr utilizando una base con datos bibliométricos que fue generada utilizando la herramienta Constellate de jstor. Esta base es bastante cercana a lo que podriamos conseguir en "el mundo real" porque tiene datos faltantes, esta re desordanada, tiene malos nombres de variables etc...</span>
<span id="cb40-15"><a href="#cb40-15"></a></span>
<span id="cb40-16"><a href="#cb40-16"></a>Para acceder a los datos podemos hacer <span class="co">[</span><span class="ot">click aca</span><span class="co">](https://osf.io/download/cp2kz)</span> o directamente entrar al repositorio y descargarlos manualmente: https://osf.io/bwdvy/?view_only=</span>
<span id="cb40-17"><a href="#cb40-17"></a></span>
<span id="cb40-18"><a href="#cb40-18"></a>Una vez descargados los datos es conveniente guardarlos en la carpeta datos de nuestro proyecto.</span>
<span id="cb40-19"><a href="#cb40-19"></a></span>
<span id="cb40-20"><a href="#cb40-20"></a>Otra opción es ejecurtar este codigo. De esta manera la funcion dowload.file tomara la url que ingresemos, desgarcará el archivo y lo guardará donde le indiquemos. En este caso en la carpeta datos de nuestro proyecto</span>
<span id="cb40-21"><a href="#cb40-21"></a></span>
<span id="cb40-22"><a href="#cb40-22"></a>::: {.callout-tip collapse="true"}</span>
<span id="cb40-23"><a href="#cb40-23"></a><span class="fu">## ATENCIÓN!!</span></span>
<span id="cb40-24"><a href="#cb40-24"></a></span>
<span id="cb40-25"><a href="#cb40-25"></a>Para que esto funcione ya debemos tener creada la carpeta datos en nuestro proyecto</span>
<span id="cb40-26"><a href="#cb40-26"></a>:::</span>
<span id="cb40-27"><a href="#cb40-27"></a></span>
<span id="cb40-28"><a href="#cb40-28"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb40-29"><a href="#cb40-29"></a></span>
<span id="cb40-30"><a href="#cb40-30"></a><span class="fu">download.file</span>(<span class="at">url =</span> <span class="st">"https://osf.io/download/cp2kz"</span>, <span class="co"># URL donde esta el archivo a descargar</span></span>
<span id="cb40-31"><a href="#cb40-31"></a>              <span class="at">destfile =</span> <span class="st">"datos/datos_cdc.csv"</span>) <span class="co"># carpeta donde se guardara el archivo</span></span>
<span id="cb40-32"><a href="#cb40-32"></a></span>
<span id="cb40-33"><a href="#cb40-33"></a><span class="fu">library</span>(readr) <span class="co"># Para leer datos</span></span>
<span id="cb40-34"><a href="#cb40-34"></a>datos_cdc <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"datos/datos_cdc.csv"</span>) <span class="co"># Funcion para leer datos csv (separados por coma)</span></span>
<span id="cb40-35"><a href="#cb40-35"></a></span>
<span id="cb40-36"><a href="#cb40-36"></a><span class="fu">glimpse</span>() <span class="co"># Esto es para darle un vistazo a la base</span></span>
<span id="cb40-37"><a href="#cb40-37"></a></span>
<span id="cb40-38"><a href="#cb40-38"></a><span class="in">```</span></span>
<span id="cb40-39"><a href="#cb40-39"></a></span>
<span id="cb40-40"><a href="#cb40-40"></a><span class="fu">## Pero... ¿Cómo?</span></span>
<span id="cb40-41"><a href="#cb40-41"></a></span>
<span id="cb40-42"><a href="#cb40-42"></a>Podemos pensar el manejo de datos con dplyr como si las funciones del paquete fueran verbos. Cuales son esos verbos?</span>
<span id="cb40-43"><a href="#cb40-43"></a></span>
<span id="cb40-44"><a href="#cb40-44"></a>| Verbo       | Función       | Descripción                                                                                                                                                                                                                                   |</span>
<span id="cb40-45"><a href="#cb40-45"></a>|-------------|---------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|</span>
<span id="cb40-46"><a href="#cb40-46"></a>| Filtrar     | <span class="in">`filter()`</span>    | Esta función maneja los datos según sus filas. Lo que hace es filtrar datos según la lógica que le indiquemos.                                                                                                                                |</span>
<span id="cb40-47"><a href="#cb40-47"></a>| Seleccionar | <span class="in">`select()`</span>    | Esta funciona maneja los datos según las columnas. Lo que hace es seleccionar (*o también quitar*) variables (columnas de nuestra base de datos)                                                                                              |</span>
<span id="cb40-48"><a href="#cb40-48"></a>| Crear       | <span class="in">`mutate()`</span>    | Esta función también modifica columnas y lo que hace es crear variables nuevas.                                                                                                                                                               |</span>
<span id="cb40-49"><a href="#cb40-49"></a>| Ordenar     | <span class="in">`arrange()`</span>   | Esta función maneja según las filas de alguna columna seleccionada. Lo que hace es ordenar la base de datos de menor a mayor (*o viceversa*) segun los datos de una variable. **Básicamente es como el botón de Ordenar y Filtrar de excel**. |</span>
<span id="cb40-50"><a href="#cb40-50"></a>| Acomodar    | <span class="in">`relocate()`</span>  | Esta función también trabaja con columnas y lo que hace es re-ordenarlas. Emula lo que comúnmente se hace con el mouse. Indicamos que variables queremos mover y hacia donde.                                                                 |</span>
<span id="cb40-51"><a href="#cb40-51"></a>| Renombrar   | <span class="in">`rename()`</span>    | Esta función trabaja con columnas y lo que hace es renombrarlas. El orden es: nombre nuevo = nombre viejo                                                                                                                                     |</span>
<span id="cb40-52"><a href="#cb40-52"></a>| Resumir     | <span class="in">`summarise()`</span> | Esta función genera un resumen de nuestros datos ya sean generales o agrupados utilizando la función de abajo <span class="in">`group_by()`</span>                                                                                                                    |</span>
<span id="cb40-53"><a href="#cb40-53"></a>| Agrupar     | <span class="in">`group_by()`</span>  | Esta función agrupa los datos según una variable categórica en particular.                                                                                                                                                                    |</span>
<span id="cb40-54"><a href="#cb40-54"></a></span>
<span id="cb40-55"><a href="#cb40-55"></a>La manera de utilizar estas herramientas es bastante simple. Se escribe la función que necesitemos, se indican los datos en los que vamos a trabajar y luego se indica aquello que necesitemos hacer.</span>
<span id="cb40-56"><a href="#cb40-56"></a></span>
<span id="cb40-57"><a href="#cb40-57"></a><span class="fu">### Filtrar</span></span>
<span id="cb40-58"><a href="#cb40-58"></a></span>
<span id="cb40-59"><a href="#cb40-59"></a><span class="in">```{r message=FALSE}</span></span>
<span id="cb40-60"><a href="#cb40-60"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb40-61"><a href="#cb40-61"></a><span class="in">```</span></span>
<span id="cb40-62"><a href="#cb40-62"></a></span>
<span id="cb40-63"><a href="#cb40-63"></a>Pseudocodigo</span>
<span id="cb40-64"><a href="#cb40-64"></a></span>
<span id="cb40-65"><a href="#cb40-65"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb40-66"><a href="#cb40-66"></a></span>
<span id="cb40-67"><a href="#cb40-67"></a><span class="fu">funcion</span>(datos, lo que necesitamos)</span>
<span id="cb40-68"><a href="#cb40-68"></a></span>
<span id="cb40-69"><a href="#cb40-69"></a><span class="in">```</span></span>
<span id="cb40-70"><a href="#cb40-70"></a></span>
<span id="cb40-71"><a href="#cb40-71"></a>Pseudocodigo con un objetivo más claro</span>
<span id="cb40-72"><a href="#cb40-72"></a></span>
<span id="cb40-73"><a href="#cb40-73"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb40-74"><a href="#cb40-74"></a></span>
<span id="cb40-75"><a href="#cb40-75"></a><span class="fu">filtrar</span>(datos, variable mayor que <span class="dv">1</span>)</span>
<span id="cb40-76"><a href="#cb40-76"></a></span>
<span id="cb40-77"><a href="#cb40-77"></a><span class="in">```</span></span>
<span id="cb40-78"><a href="#cb40-78"></a></span>
<span id="cb40-79"><a href="#cb40-79"></a>Codigo para alcanzar el objetivo</span>
<span id="cb40-80"><a href="#cb40-80"></a></span>
<span id="cb40-83"><a href="#cb40-83"></a><span class="in">```{r}</span></span>
<span id="cb40-84"><a href="#cb40-84"></a><span class="fu">filter</span>(<span class="at">.data =</span> starwars, height <span class="sc">&gt;</span> <span class="dv">175</span>) <span class="co"># En este caso solo necesito aquellos datos de quienes tengan una altura mayor a 175 cm</span></span>
<span id="cb40-85"><a href="#cb40-85"></a></span>
<span id="cb40-86"><a href="#cb40-86"></a><span class="fu">filter</span>(<span class="at">.data =</span> starwars, species <span class="sc">==</span> <span class="st">"Wookiee"</span>) <span class="co"># En este caso solo necesito los datos de quienes sean de la especie Wookiee</span></span>
<span id="cb40-87"><a href="#cb40-87"></a></span>
<span id="cb40-88"><a href="#cb40-88"></a><span class="in">```</span></span>
<span id="cb40-89"><a href="#cb40-89"></a></span>
<span id="cb40-90"><a href="#cb40-90"></a><span class="fu">### Seleccionar</span></span>
<span id="cb40-91"><a href="#cb40-91"></a></span>
<span id="cb40-92"><a href="#cb40-92"></a>Pseudocodigo</span>
<span id="cb40-93"><a href="#cb40-93"></a></span>
<span id="cb40-94"><a href="#cb40-94"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb40-95"><a href="#cb40-95"></a></span>
<span id="cb40-96"><a href="#cb40-96"></a><span class="fu">seleccionar</span>(datos, <span class="fu">variable</span>(s) de interes)</span>
<span id="cb40-97"><a href="#cb40-97"></a></span>
<span id="cb40-98"><a href="#cb40-98"></a><span class="in">```</span></span>
<span id="cb40-99"><a href="#cb40-99"></a></span>
<span id="cb40-100"><a href="#cb40-100"></a>Código</span>
<span id="cb40-101"><a href="#cb40-101"></a></span>
<span id="cb40-104"><a href="#cb40-104"></a><span class="in">```{r}</span></span>
<span id="cb40-105"><a href="#cb40-105"></a><span class="fu">select</span>(<span class="at">.data =</span> starwars, <span class="fu">c</span>(name, height, mass, gender)) <span class="co"># En este caso solo me interesaban las variables nombre, altura, masa y genero</span></span>
<span id="cb40-106"><a href="#cb40-106"></a></span>
<span id="cb40-107"><a href="#cb40-107"></a>seleccion1 <span class="ot">&lt;-</span> <span class="fu">select</span>(<span class="at">.data =</span> starwars, <span class="fu">c</span>(name, height, mass, gender))</span>
<span id="cb40-108"><a href="#cb40-108"></a></span>
<span id="cb40-109"><a href="#cb40-109"></a><span class="fu">select</span>(<span class="at">.data =</span> seleccion1, <span class="sc">-</span>height) <span class="co"># En este caso se puede usar el select para quitar una variable. Eso se hace usando un - antes de la variable que queremos quitar.</span></span>
<span id="cb40-110"><a href="#cb40-110"></a></span>
<span id="cb40-111"><a href="#cb40-111"></a><span class="fu">select</span>(<span class="at">.data =</span> starwars, <span class="fu">starts_with</span>(<span class="st">"h"</span>))</span>
<span id="cb40-112"><a href="#cb40-112"></a></span>
<span id="cb40-113"><a href="#cb40-113"></a><span class="in">```</span></span>
<span id="cb40-114"><a href="#cb40-114"></a></span>
<span id="cb40-115"><a href="#cb40-115"></a><span class="fu">### Crear</span></span>
<span id="cb40-116"><a href="#cb40-116"></a></span>
<span id="cb40-117"><a href="#cb40-117"></a>Pseudocodigo</span>
<span id="cb40-118"><a href="#cb40-118"></a></span>
<span id="cb40-119"><a href="#cb40-119"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb40-120"><a href="#cb40-120"></a></span>
<span id="cb40-121"><a href="#cb40-121"></a><span class="fu">crear</span>(datos, <span class="fu">variable</span>(s) que necesito <span class="at">crear =</span> contenido)</span>
<span id="cb40-122"><a href="#cb40-122"></a></span>
<span id="cb40-123"><a href="#cb40-123"></a><span class="in">```</span></span>
<span id="cb40-124"><a href="#cb40-124"></a></span>
<span id="cb40-125"><a href="#cb40-125"></a>Código</span>
<span id="cb40-126"><a href="#cb40-126"></a></span>
<span id="cb40-129"><a href="#cb40-129"></a><span class="in">```{r}</span></span>
<span id="cb40-130"><a href="#cb40-130"></a><span class="fu">mutate</span>(<span class="at">.data =</span> seleccion1, <span class="at">altura =</span> height<span class="sc">/</span><span class="dv">100</span>) <span class="co"># En este caso vamos a crear una nueva variable que contenta la transformacion de height de centimetros a metros</span></span>
<span id="cb40-131"><a href="#cb40-131"></a></span>
<span id="cb40-132"><a href="#cb40-132"></a></span>
<span id="cb40-133"><a href="#cb40-133"></a></span>
<span id="cb40-134"><a href="#cb40-134"></a></span>
<span id="cb40-135"><a href="#cb40-135"></a><span class="in">```</span></span>
<span id="cb40-136"><a href="#cb40-136"></a></span>
<span id="cb40-137"><a href="#cb40-137"></a>::: {.callout-tip collapse="true"}</span>
<span id="cb40-138"><a href="#cb40-138"></a><span class="fu">## A tener en cuenta!</span></span>
<span id="cb40-139"><a href="#cb40-139"></a></span>
<span id="cb40-140"><a href="#cb40-140"></a>Cuando usemos mutate() con una variable que ya existe en el dataset conviene no sobreescribirla. Esto afectaría la reproducibilidad del código. Lo mejor es generar una nueva variable con algún identificador.</span>
<span id="cb40-141"><a href="#cb40-141"></a></span>
<span id="cb40-142"><a href="#cb40-142"></a>Por ejemplo: Cuando cargamos el dataset vemos que la variable de agrupación gender es de tipo chr y lo que necesitamos es que sea un factor. En ese caso se haría lo siguiente:</span>
<span id="cb40-143"><a href="#cb40-143"></a></span>
<span id="cb40-146"><a href="#cb40-146"></a><span class="in">```{r}</span></span>
<span id="cb40-147"><a href="#cb40-147"></a><span class="fu">mutate</span>(<span class="at">.data =</span> seleccion1, <span class="at">gender_fct =</span> <span class="fu">as_factor</span>(gender)) <span class="co"># Nos quedan ambas variables y solo utilizamos la que necesitemos</span></span>
<span id="cb40-148"><a href="#cb40-148"></a></span>
<span id="cb40-149"><a href="#cb40-149"></a></span>
<span id="cb40-150"><a href="#cb40-150"></a><span class="in">```</span></span>
<span id="cb40-151"><a href="#cb40-151"></a>:::</span>
<span id="cb40-152"><a href="#cb40-152"></a></span>
<span id="cb40-153"><a href="#cb40-153"></a><span class="fu">### Ordenar</span></span>
<span id="cb40-154"><a href="#cb40-154"></a></span>
<span id="cb40-155"><a href="#cb40-155"></a>Pseudocodigo</span>
<span id="cb40-156"><a href="#cb40-156"></a></span>
<span id="cb40-157"><a href="#cb40-157"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb40-158"><a href="#cb40-158"></a></span>
<span id="cb40-159"><a href="#cb40-159"></a><span class="fu">ordenar</span>(datos, variable seleccionada)</span>
<span id="cb40-160"><a href="#cb40-160"></a></span>
<span id="cb40-161"><a href="#cb40-161"></a><span class="in">```</span></span>
<span id="cb40-162"><a href="#cb40-162"></a></span>
<span id="cb40-163"><a href="#cb40-163"></a>Código</span>
<span id="cb40-164"><a href="#cb40-164"></a></span>
<span id="cb40-167"><a href="#cb40-167"></a><span class="in">```{r}</span></span>
<span id="cb40-168"><a href="#cb40-168"></a><span class="fu">arrange</span>(<span class="at">.data =</span> starwars, height) <span class="co"># Orden de menor a mayor</span></span>
<span id="cb40-169"><a href="#cb40-169"></a></span>
<span id="cb40-170"><a href="#cb40-170"></a><span class="fu">arrange</span>(<span class="at">.data =</span> starwars, <span class="fu">desc</span>(height)) <span class="co"># Orden de mayor a menor</span></span>
<span id="cb40-171"><a href="#cb40-171"></a></span>
<span id="cb40-172"><a href="#cb40-172"></a><span class="in">```</span></span>
<span id="cb40-173"><a href="#cb40-173"></a></span>
<span id="cb40-174"><a href="#cb40-174"></a><span class="fu">### Acomodar</span></span>
<span id="cb40-175"><a href="#cb40-175"></a></span>
<span id="cb40-176"><a href="#cb40-176"></a>Pseudocodigo</span>
<span id="cb40-177"><a href="#cb40-177"></a></span>
<span id="cb40-178"><a href="#cb40-178"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb40-179"><a href="#cb40-179"></a></span>
<span id="cb40-180"><a href="#cb40-180"></a><span class="fu">acomodar</span>(datos, variable, antes<span class="sc">/</span>despues de)</span>
<span id="cb40-181"><a href="#cb40-181"></a></span>
<span id="cb40-182"><a href="#cb40-182"></a><span class="in">```</span></span>
<span id="cb40-183"><a href="#cb40-183"></a></span>
<span id="cb40-184"><a href="#cb40-184"></a>Código</span>
<span id="cb40-185"><a href="#cb40-185"></a></span>
<span id="cb40-188"><a href="#cb40-188"></a><span class="in">```{r}</span></span>
<span id="cb40-189"><a href="#cb40-189"></a><span class="fu">relocate</span>(<span class="at">.data =</span> seleccion1, gender, <span class="at">.after =</span> name) <span class="co"># En este caso acomodamos gender despues de name</span></span>
<span id="cb40-190"><a href="#cb40-190"></a></span>
<span id="cb40-191"><a href="#cb40-191"></a></span>
<span id="cb40-192"><a href="#cb40-192"></a><span class="fu">relocate</span>(<span class="at">.data =</span> seleccion1, name, <span class="at">.before =</span> mass) <span class="co"># En este caso acomodamos name despues de mass</span></span>
<span id="cb40-193"><a href="#cb40-193"></a></span>
<span id="cb40-194"><a href="#cb40-194"></a></span>
<span id="cb40-195"><a href="#cb40-195"></a><span class="in">```</span></span>
<span id="cb40-196"><a href="#cb40-196"></a></span>
<span id="cb40-197"><a href="#cb40-197"></a><span class="fu">### Renombrar</span></span>
<span id="cb40-198"><a href="#cb40-198"></a></span>
<span id="cb40-199"><a href="#cb40-199"></a>Pseudocodigo</span>
<span id="cb40-200"><a href="#cb40-200"></a></span>
<span id="cb40-201"><a href="#cb40-201"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb40-202"><a href="#cb40-202"></a></span>
<span id="cb40-203"><a href="#cb40-203"></a><span class="fu">renombrar</span>(datos, nombre <span class="at">nuevo =</span> nombre viejo)</span>
<span id="cb40-204"><a href="#cb40-204"></a></span>
<span id="cb40-205"><a href="#cb40-205"></a><span class="in">```</span></span>
<span id="cb40-206"><a href="#cb40-206"></a></span>
<span id="cb40-207"><a href="#cb40-207"></a>Código</span>
<span id="cb40-208"><a href="#cb40-208"></a></span>
<span id="cb40-211"><a href="#cb40-211"></a><span class="in">```{r}</span></span>
<span id="cb40-212"><a href="#cb40-212"></a>seleccion1_traducida <span class="ot">&lt;-</span> <span class="fu">rename</span>(seleccion1,</span>
<span id="cb40-213"><a href="#cb40-213"></a>                               <span class="at">nombre =</span> name,</span>
<span id="cb40-214"><a href="#cb40-214"></a>                               <span class="at">altura =</span> height,</span>
<span id="cb40-215"><a href="#cb40-215"></a>                               <span class="at">masa_kg =</span> mass,</span>
<span id="cb40-216"><a href="#cb40-216"></a>                               <span class="at">genero =</span> gender)</span>
<span id="cb40-217"><a href="#cb40-217"></a></span>
<span id="cb40-218"><a href="#cb40-218"></a><span class="fu">names</span>(seleccion1)</span>
<span id="cb40-219"><a href="#cb40-219"></a><span class="fu">names</span>(seleccion1_traducida)</span>
<span id="cb40-220"><a href="#cb40-220"></a></span>
<span id="cb40-221"><a href="#cb40-221"></a><span class="in">```</span></span>
<span id="cb40-222"><a href="#cb40-222"></a></span>
<span id="cb40-223"><a href="#cb40-223"></a><span class="fu">## Pipe, Pipa, Encadenamiento, Tuberias...</span></span>
<span id="cb40-224"><a href="#cb40-224"></a></span>
<span id="cb40-225"><a href="#cb40-225"></a>Los verbos que proporciona dplyr son geniales y muy faciles de utilizar, pero para todo lo que hicimos más arriba se necesito una linea de codigo para cada verbo. Es decir, cada codigo era independiente del otro. Una gran funcion que permite unificar todos los verbos en un solo programa es la pipa, tuberia o lo que se dice piping.</span>
<span id="cb40-226"><a href="#cb40-226"></a></span>
<span id="cb40-227"><a href="#cb40-227"></a>Les presento a ella <span class="in">`%&gt;%`</span> el operador del paquete <span class="in">`magrittr`</span>. Lo que hace es **tomar el resultado de una función y pasarla a otra función como argumento. Esto nos permite vincular una secuencia de pasos de análisis. O en otras palabras, utilizar varios verbos de dplyr en un mismo programa.**</span>
<span id="cb40-228"><a href="#cb40-228"></a></span>
<span id="cb40-229"><a href="#cb40-229"></a>Por ejemplo: Se necesita seleccionar algunas variables, renombrarlas y crear variables que sean del tipo correcto. Por ultimo, graficar la altura según el sexo del personaje</span>
<span id="cb40-230"><a href="#cb40-230"></a></span>
<span id="cb40-231"><a href="#cb40-231"></a>*Sin %\&gt;%*</span>
<span id="cb40-232"><a href="#cb40-232"></a></span>
<span id="cb40-235"><a href="#cb40-235"></a><span class="in">```{r}</span></span>
<span id="cb40-236"><a href="#cb40-236"></a>paso_1 <span class="ot">&lt;-</span> <span class="fu">select</span>(<span class="at">.data =</span> starwars, <span class="fu">c</span>(name, sex, gender, species, mass, height))</span>
<span id="cb40-237"><a href="#cb40-237"></a></span>
<span id="cb40-238"><a href="#cb40-238"></a>paso_2 <span class="ot">&lt;-</span> <span class="fu">rename</span>(<span class="at">.data =</span> paso_1, <span class="at">nombre =</span> name,</span>
<span id="cb40-239"><a href="#cb40-239"></a>                                 <span class="at">sexo =</span> sex,</span>
<span id="cb40-240"><a href="#cb40-240"></a>                                 <span class="at">genero =</span> gender,</span>
<span id="cb40-241"><a href="#cb40-241"></a>                                 <span class="at">especie =</span> species,</span>
<span id="cb40-242"><a href="#cb40-242"></a>                                 <span class="at">masa_kg =</span> mass,</span>
<span id="cb40-243"><a href="#cb40-243"></a>                                 <span class="at">altura =</span> height)</span>
<span id="cb40-244"><a href="#cb40-244"></a></span>
<span id="cb40-245"><a href="#cb40-245"></a>paso_3 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(<span class="at">.data =</span> paso_2, <span class="at">sexo_fct =</span> <span class="fu">as_factor</span>(sexo),</span>
<span id="cb40-246"><a href="#cb40-246"></a>                                 <span class="at">genero_fct =</span> <span class="fu">as_factor</span>(genero),</span>
<span id="cb40-247"><a href="#cb40-247"></a>                                 <span class="at">especie_fct =</span> <span class="fu">as_factor</span>(especie))</span>
<span id="cb40-248"><a href="#cb40-248"></a></span>
<span id="cb40-249"><a href="#cb40-249"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="fu">select</span>(paso_3, <span class="fu">c</span>(sexo_fct, altura, genero_fct)), <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> sexo_fct, <span class="at">y =</span> altura)) <span class="sc">+</span></span>
<span id="cb40-250"><a href="#cb40-250"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb40-251"><a href="#cb40-251"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb40-252"><a href="#cb40-252"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb40-253"><a href="#cb40-253"></a><span class="in">```</span></span>
<span id="cb40-254"><a href="#cb40-254"></a></span>
<span id="cb40-255"><a href="#cb40-255"></a>*Con %\&gt;%*</span>
<span id="cb40-256"><a href="#cb40-256"></a></span>
<span id="cb40-259"><a href="#cb40-259"></a><span class="in">```{r}</span></span>
<span id="cb40-260"><a href="#cb40-260"></a>starwars <span class="sc">%&gt;%</span> <span class="co"># Selecciono los datos Y DESPUES</span></span>
<span id="cb40-261"><a href="#cb40-261"></a>  <span class="fu">select</span>(name, sex, gender, species, mass, height) <span class="sc">%&gt;%</span> <span class="co">#Selecciono las variables Y DESPUES</span></span>
<span id="cb40-262"><a href="#cb40-262"></a>  <span class="fu">rename</span>(<span class="at">nombre =</span> name, </span>
<span id="cb40-263"><a href="#cb40-263"></a>         <span class="at">sexo =</span> sex,</span>
<span id="cb40-264"><a href="#cb40-264"></a>         <span class="at">genero =</span> gender,</span>
<span id="cb40-265"><a href="#cb40-265"></a>         <span class="at">especie =</span> species,</span>
<span id="cb40-266"><a href="#cb40-266"></a>         <span class="at">masa_kg =</span> mass,</span>
<span id="cb40-267"><a href="#cb40-267"></a>         <span class="at">altura =</span> height) <span class="sc">%&gt;%</span> <span class="co"># Renombro las variables Y DESPUES</span></span>
<span id="cb40-268"><a href="#cb40-268"></a>  <span class="fu">mutate</span>(<span class="at">sexo_fct =</span> <span class="fu">as_factor</span>(sexo),</span>
<span id="cb40-269"><a href="#cb40-269"></a>         <span class="at">genero_fct =</span> <span class="fu">as_factor</span>(genero),</span>
<span id="cb40-270"><a href="#cb40-270"></a>         <span class="at">especie_fct =</span> <span class="fu">as_factor</span>(especie)) <span class="sc">%&gt;%</span> <span class="co"># Creo nuevas variables Y DESPUES</span></span>
<span id="cb40-271"><a href="#cb40-271"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span> <span class="co"># Grafico</span></span>
<span id="cb40-272"><a href="#cb40-272"></a>  <span class="fu">geom_boxplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> sexo_fct, <span class="at">y =</span> altura)) <span class="sc">+</span></span>
<span id="cb40-273"><a href="#cb40-273"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb40-274"><a href="#cb40-274"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb40-275"><a href="#cb40-275"></a></span>
<span id="cb40-276"><a href="#cb40-276"></a></span>
<span id="cb40-277"><a href="#cb40-277"></a></span>
<span id="cb40-278"><a href="#cb40-278"></a><span class="in">```</span></span>
<span id="cb40-279"><a href="#cb40-279"></a></span>
<span id="cb40-280"><a href="#cb40-280"></a>::: {.callout-tip collapse="true"}</span>
<span id="cb40-281"><a href="#cb40-281"></a><span class="fu">## Aspectos a tener en cuenta!!</span></span>
<span id="cb40-282"><a href="#cb40-282"></a></span>
<span id="cb40-283"><a href="#cb40-283"></a><span class="ss">-   </span>Me encanto la pipa, pero es medio complicada de escribir. Si, es verdad. Para eso usamos el siguiente atajo del teclado <span class="in">`CTRL + SHIFT + M`</span> y ya tenemos la pipa. Con un poco de practica ya sale sola.</span>
<span id="cb40-284"><a href="#cb40-284"></a></span>
<span id="cb40-285"><a href="#cb40-285"></a><span class="ss">-   </span>Existe otra pipa que fue introducida recientemente. Yo le digo el pinguinito. Es la pipa nativa de R y es así \|<span class="sc">\&gt;</span>. En general cumple la misma función. Yo como soy viejo y me acostumbre a usar %<span class="sc">\&gt;</span>% entonces sigo con esa. Ustedes usen la que mas les guste y cumpla mejor con sus objetivos. Hay debate sobre que pipa usar. Quedara para otro momento.</span>
<span id="cb40-286"><a href="#cb40-286"></a>:::</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>